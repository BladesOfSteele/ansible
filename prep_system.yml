---
  - name: Prepare system for DNF and Ansible installation
    vars:
    - ansible_python_interpreter: "{{ '/usr/bin/python3' }}"
    hosts: aix
    gather_facts: true

    tasks:
      - name: increase file systems
        community.general.aix_filesystem:
          filesystem: "{{ item }}"
          size: 20G
          state: present
        loop:
          - /tmp
          - /var
          - /opt

      - name: copy resolv.conf
        copy:
          src: /etc/resolv.conf
          dest: /etc/resolv.conf

      - name: copy profile file
        copy:
          src: profile
          dest: /.profile

      - name: copy UTF LPP files
        copy:
          src: "{{ item }}"
          dest: /tmp/
        with_fileglob: /home/root/ansible/bos.loc*

      - name: install UTF files
        installp:
          name: "{{ item }}"
          repository_path: /tmp
          accept_license: yes
        loop:
          - bos.loc.com.utf
          - bos.loc.utf.EN_US
